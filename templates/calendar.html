{% extends "base.html" %}

{% block content %}

<!-- Mobiscroll JS and CSS Includes -->
<link rel="stylesheet" href="{{ url_for('static', filename='mobiscroll.javascript.min.css') }}">
<script src="{{ url_for('static', filename='js/mobiscroll.javascript.min.js') }}"></script>

<style type="text/css">
        body {
    margin: 0;
    padding: 0;
}

body,
html {
    height: 100%;
}

</style>

<div mbsc-page class="demo-dots-colors-labels">
    <div style="height:100%">
            <div class="mbsc-grid">
    <div class="mbsc-row">
        <div class="mbsc-col-sm-12 mbsc-col-md-4">
            <div class="mbsc-form-group">
                <div class="mbsc-form-group-title">Home ðŸŸ© / Office ðŸŸ¦</div>
                <div id="demo-colored"></div>
            </div>
        </div>
    </div>
</div>
    </div>
</div>

<script>
    var array = []
    var elem = []
</script>

{% for x in  all_dates %}
    {% for y in  x %}
        <script>
            elem.push('{{ y }}')
        </script>
    {% endfor %}
    <script>
        array.push(elem)
        elem = []
    </script>
{% endfor %}

<script>    
    mobiscroll.setOptions({
        locale: mobiscroll.localeEs,  // Specify language like: locale: mobiscroll.localePl or omit setting to use default
        theme: 'ios',                 // Specify theme like: theme: 'ios' or omit setting to use default
        themeVariant: 'light'         // More info about themeVariant: https://docs.mobiscroll.com/5-22-0/javascript/calendar#opt-themeVariant
    });

    var now = new Date();

    var color_office = '#357EC7';
    var color_home = 'green';
    //var all_dates = '{{ all_dates }}';

    var colors = []
    var color_bg 
    array.forEach(function (item, index) {
        if (item[1] == "True") {color_bg = color_home} else {color_bg = color_office}
        var obj = {
            date: item[0],
            background: color_bg
        }
        colors.push(obj)
    });

    mobiscroll.datepicker('#demo-colored', {
        controls: ['calendar'],       // More info about controls: https://docs.mobiscroll.com/5-22-0/javascript/calendar#opt-controls
        display: 'inline',            // Specify display mode like: display: 'bottom' or omit setting to use default
        colors: colors                // More info about colors: https://docs.mobiscroll.com/5-22-0/javascript/calendar#opt-colors
        /*
        colors: [                     // More info about colors: https://docs.mobiscroll.com/5-22-0/javascript/calendar#opt-colors
            //{ recurring: { repeat: 'yearly', month: 12, day: 8 }, background: '#9ccc65' },
            // { start: new Date(now.getFullYear(), now.getMonth() + 1, 15), end: new Date(now.getFullYear(), now.getMonth() + 1, 18), text: 'Conference', background: '#f4511e' }
            // { date: new Date(now.getFullYear(), now.getMonth() + 1, 4), background: '#cfd8dc' },
            { date: new Date(now.getFullYear(), now.getMonth(), 2), background: color_office },
            { date: new Date(now.getFullYear(), now.getMonth(), 3), background: color_office },
            { date: new Date(now.getFullYear(), now.getMonth(), 11), background: color_office },
            { date: new Date(now.getFullYear(), now.getMonth(), 19), background: color_home },
            { date: new Date(now.getFullYear(), now.getMonth(), 28), background: color_home },
        ]
        */
    });

</script>

{% endblock %}